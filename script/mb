#!/usr/bin/env tclsh
#
# MB, make bench between modulecmd versions
# Copyright (C) 2019-2025 Xavier Delaruelle
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

##########################################################################

proc reportUsage {} {
   puts "Usage: $::argv0 \[options\] \[bench|profile\] \[test...\]

Make bench between modulecmd versions

Available tests:
  help, avail, avail_cache, avail2, avail2_cache, avail3, avail3_cache,
  whatis, whatis_cache, whatis2, whatis2_cache, whatis3, whatis3_cache,
  apropos, load, load_cache, load2, load2_cache, list, list2, purge, unload
  (all tests selected by default)

Modes:
  bench           Report command execution time
  profile         Report top 10 procedure calls

Options:
  -h, --help      Show this help message and exit

Examples:
   $::argv0
   $::argv0 profile
   $::argv0 load unload list"
}

proc sgr {sgrcode str} {
   return "\033\[${sgrcode}m$str\033\[0m"
}

proc reportError {str} {
   puts stderr "[sgr {1;31} ERROR]: $str"
}

proc reportWarning {str} {
   puts stderr "[sgr {1;33} WARNING]: $str"
}

set benchrep 20
set profprocnb 10
set curdir [pwd]

# time test run for a given modulecmd version
proc bench {tag args} {
   return [expr {round([lindex [split [time {catch {exec ./modulecmd.$tag sh\
      {*}$args >>& /dev/null}} $::benchrep]] 0] / 1000)}]
}

# profile given modulecmd version test run
proc profile {tag args} {
   return [eval exec script/mlprof report$::profprocnb $tag $args]
}

# procedures to create cache file in modulepaths prior tests and remove them
# after tests
proc module_cache_create {tag} {
   exec ./modulecmd.$tag sh --silent cachebuild
}
proc module_cache_delete {tag} {
   exec ./modulecmd.$tag sh --silent cacheclear
}

# run test for each modulecmd version
proc runtest {mode test} {
   # is test a cache-enabled version of another test
   if {[set idx [string first _cache $test]] > -1} {
      set eff_test [string range $test 0 $idx-1]
      set use_cache 1
   } else {
      set eff_test $test
      set use_cache 0
   }

   # set environment for test (based on effective test config)
   if {[info exists ::testenvlist($eff_test)]} {
      foreach {var val} $::testenvlist($eff_test) {
         set ::env($var) $val
      }
   }

   if {[info exists ::testsubcmdlist($eff_test)]} {
      lappend cmdlist $::testsubcmdlist($eff_test)
   } else {
      lappend cmdlist $eff_test
   }

   if {[info exists ::testarglist($eff_test)]} {
      set cmdlist [concat $cmdlist $::testarglist($eff_test)]
   }

   foreach tag $::taglist {
      # run test if tag version is compatible with it
      if {[info exists ::testcompatlist($test)] && [string match {v[0-9]*}\
         $tag] && "v$::testcompatlist($test)" ne $tag && [lindex [lsort\
         -dictionary [list v$::testcompatlist($test) $tag]] 0] eq $tag} {
         if {$mode eq {bench}} {
            set res -
         } else {
            set res [list - 0 0]
            for {set i 0} {$i < $::profprocnb} {incr i 1} {
               lappend res - 0 0
            }
         }
      } else {
         if {$use_cache} {
            module_cache_create $tag
         }
         set res [eval $mode $tag $cmdlist]
         if {$use_cache} {
            module_cache_delete $tag
         }
      }
      lappend ::testres($test) $tag $res
   }

   # clean test environment
   if {[info exists ::testenvlist($eff_test)]} {
      foreach {var val} $::testenvlist($eff_test) {
         unset ::env($var)
      }
   }
}

# parse arguments
set hintmsg "\n  Try '$argv0 --help' for more information."
foreach arg $argv {
   switch -glob -- $arg {
      profile {
         set mode profile
      }
      bench {
         set mode bench
      }
      help - avail - avail_cache - avail2 - avail2_cache - avail3 -\
         avail3_cache - whatis - whatis_cache - whatis2 - whatis2_cache -\
         whatis3 - whatis3_cache - apropos - load - load_cache - load2 -\
         load2_cache - list - list2 - purge - unload {
         lappend testlist $arg
      }
      -h - --help {
         reportUsage
         exit 0
      }
      -* {
         reportError "Invalid option '$arg'$hintmsg"
         exit 1
      }
      default {
         reportError "Invalid test name '$arg'$hintmsg"
         exit 1
      }
   }
}
# use default values if not set on command-line
if {![info exists mode]} {
   set mode bench
}
if {![info exists testlist]} {
   set testlist [list help avail avail_cache avail2 avail2_cache avail3\
      avail3_cache whatis whatis_cache whatis2 whatis2_cache whatis3\
      whatis3_cache apropos load load_cache load2 load2_cache list list2\
      purge unload]
}

# fetch information from git repository to save workspace and get available
# modulecmd releases to compare. script will exit on first git command if it
# not called from a git repository
set headcommit [exec git rev-parse --short=8 HEAD]
array set headref_list [exec git show-ref --heads --abbrev=8]
set headref [expr {[info exists headref_list($headcommit)] ?\
   [string range $headref_list($headcommit) 11 end] : $headcommit}]

set needstash [expr {[exec git status --porcelain --untracked-files=no] ne\
   {}}]

# only keep last bugfix version of significant minor release
# drop releases older than 4.1 (or older than 4.5 if profile mode)
# drop several releases (to keep some old version in comparison)
# also drop alpha/beta releases
set exclvers_list [list v4.2 v4.4 v4.6 v4.8 v5.0 v5.2]
set exclbef [expr {$mode eq {profile} ? {4.5} : {4.1}}]

##nagelfar implicitvarcmd {source site.exp} install_tclsh
source site.exp
set selected_tcl_version [exec $install_tclsh << {puts [info tclversion]}]
if {[string compare $selected_tcl_version 9.0] >= 0} {
   reportWarning "Tcl $selected_tcl_version is selected, exclude Modules\
      versions <5.5"
   set exclbef 5.5
}

array set tagarray [list]
foreach tag [exec git tag --list v*] {
   if {[string compare $tag v$exclbef] == 1 && [string first alpha $tag] ==\
      -1 && [string first beta $tag] == -1} {
      set majmin [join [lrange [split $tag .] 0 1] .]
      if {[lsearch -exact $exclvers_list $majmin] == -1 && (![info exists\
         tagarray($majmin)] || [string compare $tag $tagarray($majmin)] ==\
         1)} {
         set tagarray($majmin) $tag
      }
   }
}

foreach tag [lsort [array names tagarray]] {
   lappend taglist $tagarray($tag)
}
lappend taglist $headref

# save workspace
if {$needstash} {
   exec git stash
}

# check what tag need to be built
foreach tag $taglist {
   if {![file exists modulecmd.$tag]} {
      lappend tagtobuildlist $tag
   }
}

# build modulecmd and associated libtclenvmodules for each tag
if {[info exists tagtobuildlist]} {
   # clean current workspace to build clean configuration
   catch {file delete modulecmd-test.tcl modulecmd.tcl\
      lib/libtclenvmodules.so}

   foreach tag $tagtobuildlist {
      exec git checkout $tag 2>@1
      set buildtarget [expr {[string index $tag 0] ne {v} || [string\
         compare $tag v4.3] == 1 ? {modulecmd-test.tcl} : {modulecmd.tcl}}]
      exec make SHLIB_SUFFIX=.so.$tag $buildtarget
      file rename $buildtarget modulecmd.$tag
      file attributes modulecmd.$tag -permissions ugo+x
      if {[file exists lib/envmodules.c]} {
         exec make lib/libtclenvmodules.so
         file rename lib/libtclenvmodules.so lib/libtclenvmodules.so.$tag
      }
   }
}


# configure environment for tests
catch {unset env(LOADEDMODULES)}
catch {unset env(LOADEDMODULES_modshare)}
catch {unset env(_LMFILES_)}
catch {unset env(_LMFILES__modshare)}
catch {unset env(MODULEPATH_modshare)}
catch {unset env(__MODULES_SHARE_MODULEPATH)}

# define bench tests and their arguments and environment
set modpath $curdir/testsuite/modulefiles
array set testsubcmdlist [list avail2 avail avail3 avail whatis2 whatis\
   whatis3 whatis load2 load list2 list]
array set testarglist [list avail2 load whatis2 load load load/all unload\
   load/all load2 R-bundle-Bioconductor/3.18-foss-2023a-R-4.3.2]
##nagelfar ignore Too long line
array set testenvlist [list avail [list MODULEPATH $modpath.deep:$modpath.deps] load [list MODULEPATH $modpath] list [list MODULEPATH $modpath LOADEDMODULES load/10:load/11:load/12:load/13:load/14:load/15:load/16:load/17:load/18:load/19:load/20:load/21:load/22:load/23:load/24:load/25:load/26:load/27:load/28:load/29:load/30:load/all _LMFILES_ $modpath/load/10:$modpath/load/11:$modpath/load/12:$modpath/load/13:$modpath/load/14:$modpath/load/15:$modpath/load/16:$modpath/load/17:$modpath/load/18:$modpath/load/19:$modpath/load/20:$modpath/load/21:$modpath/load/22:$modpath/load/23:$modpath/load/24:$modpath/load/25:$modpath/load/26:$modpath/load/27:$modpath/load/28:$modpath/load/29:$modpath/load/30:$modpath/load/all __MODULES_LMALTNAME load/all&load/default&load]]
set testenvlist(avail2) $testenvlist(avail)
set testenvlist(avail3) [list MODULEPATH $modpath.2 MODULERCFILE\
   $curdir/testsuite/etc/modulerc.bench3 MODULES_ADVANCED_VERSION_SPEC 1\
   MODULES_EXTENDED_DEFAULT 1]
set testenvlist(whatis) $testenvlist(avail)
set testenvlist(whatis2) $testenvlist(avail)
set testenvlist(whatis3) $testenvlist(avail3)
set testenvlist(apropos) $testenvlist(avail)
set testenvlist(unload) $testenvlist(list)
set testenvlist(load2) [list MODULEPATH $modpath.eb]
set testenvlist(list2) [list MODULEPATH $modpath.eb\
   __MODULES_LMALTNAME OpenSSL/1.1&as|OpenSSL/default&as|OpenSSL/latest:Java/11.0.27&Java/11&as|Java/default&as|Java/latest\
   __MODULES_LMPREREQ zlib/1.2.13-GCCcore-12.3.0&GCCcore/12.3.0:binutils/2.40-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0:GCC/12.3.0&GCCcore/12.3.0&binutils/2.40-GCCcore-12.3.0:numactl/2.0.16-GCCcore-12.3.0&GCCcore/12.3.0:XZ/5.4.2-GCCcore-12.3.0&GCCcore/12.3.0:libxml2/2.11.4-GCCcore-12.3.0&GCCcore/12.3.0&XZ/5.4.2-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:libpciaccess/0.17-GCCcore-12.3.0&GCCcore/12.3.0:hwloc/2.9.1-GCCcore-12.3.0&GCCcore/12.3.0&numactl/2.0.16-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0&libpciaccess/0.17-GCCcore-12.3.0:libevent/2.1.12-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&OpenSSL/1.1:UCX/1.14.1-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&numactl/2.0.16-GCCcore-12.3.0:libfabric/1.18.0-GCCcore-12.3.0&GCCcore/12.3.0&numactl/2.0.16-GCCcore-12.3.0:PMIx/4.2.4-GCCcore-12.3.0&GCCcore/12.3.0&libevent/2.1.12-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&hwloc/2.9.1-GCCcore-12.3.0:UCC/1.2.0-GCCcore-12.3.0&GCCcore/12.3.0&UCX/1.14.1-GCCcore-12.3.0:OpenMPI/4.1.5-GCC-12.3.0&GCC/12.3.0&zlib/1.2.13-GCCcore-12.3.0&hwloc/2.9.1-GCCcore-12.3.0&libevent/2.1.12-GCCcore-12.3.0&UCX/1.14.1-GCCcore-12.3.0&libfabric/1.18.0-GCCcore-12.3.0&PMIx/4.2.4-GCCcore-12.3.0&UCC/1.2.0-GCCcore-12.3.0:OpenBLAS/0.3.23-GCC-12.3.0&GCC/12.3.0:FlexiBLAS/3.3.1-GCC-12.3.0&GCC/12.3.0&OpenBLAS/0.3.23-GCC-12.3.0:FFTW/3.3.10-GCC-12.3.0&GCC/12.3.0:gompi/2023a&GCC/12.3.0&OpenMPI/4.1.5-GCC-12.3.0:FFTW.MPI/3.3.10-gompi-2023a&gompi/2023a&FFTW/3.3.10-GCC-12.3.0:ScaLAPACK/2.2.0-gompi-2023a-fb&gompi/2023a&FlexiBLAS/3.3.1-GCC-12.3.0:foss/2023a&GCC/12.3.0&OpenMPI/4.1.5-GCC-12.3.0&FlexiBLAS/3.3.1-GCC-12.3.0&FFTW/3.3.10-GCC-12.3.0&FFTW.MPI/3.3.10-gompi-2023a&ScaLAPACK/2.2.0-gompi-2023a-fb:gfbf/2023a&GCC/12.3.0&FlexiBLAS/3.3.1-GCC-12.3.0&FFTW/3.3.10-GCC-12.3.0:bzip2/1.0.8-GCCcore-12.3.0&GCCcore/12.3.0:expat/2.5.0-GCCcore-12.3.0&GCCcore/12.3.0:libpng/1.6.39-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0:Brotli/1.0.9-GCCcore-12.3.0&GCCcore/12.3.0:freetype/2.13.0-GCCcore-12.3.0&GCCcore/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&Brotli/1.0.9-GCCcore-12.3.0:ncurses/6.4-GCCcore-12.3.0&GCCcore/12.3.0:util-linux/2.39-GCCcore-12.3.0&GCCcore/12.3.0&ncurses/6.4-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:fontconfig/2.14.2-GCCcore-12.3.0&GCCcore/12.3.0&expat/2.5.0-GCCcore-12.3.0&freetype/2.13.0-GCCcore-12.3.0&util-linux/2.39-GCCcore-12.3.0:xorg-macros/1.20.0-GCCcore-12.3.0&GCCcore/12.3.0:X11/20230603-GCCcore-12.3.0&GCCcore/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&fontconfig/2.14.2-GCCcore-12.3.0&freetype/2.13.0-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&xorg-macros/1.20.0-GCCcore-12.3.0&libpciaccess/0.17-GCCcore-12.3.0:gzip/1.12-GCCcore-12.3.0&GCCcore/12.3.0:lz4/1.9.4-GCCcore-12.3.0&GCCcore/12.3.0:zstd/1.5.5-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&gzip/1.12-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&lz4/1.9.4-GCCcore-12.3.0:libdrm/2.4.115-GCCcore-12.3.0&GCCcore/12.3.0&X11/20230603-GCCcore-12.3.0:libglvnd/1.6.0-GCCcore-12.3.0&GCCcore/12.3.0&X11/20230603-GCCcore-12.3.0:libunwind/1.6.2-GCCcore-12.3.0&GCCcore/12.3.0&XZ/5.4.2-GCCcore-12.3.0:LLVM/16.0.6-GCCcore-12.3.0&GCCcore/12.3.0&ncurses/6.4-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:Mesa/23.1.4-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&libdrm/2.4.115-GCCcore-12.3.0&libglvnd/1.6.0-GCCcore-12.3.0&libunwind/1.6.2-GCCcore-12.3.0&LLVM/16.0.6-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0:libGLU/9.0.3-GCCcore-12.3.0&GCCcore/12.3.0&Mesa/23.1.4-GCCcore-12.3.0:pixman/0.42.2-GCCcore-12.3.0&GCCcore/12.3.0:libffi/3.4.4-GCCcore-12.3.0&GCCcore/12.3.0:gettext/0.21.1-GCCcore-12.3.0&GCCcore/12.3.0&libxml2/2.11.4-GCCcore-12.3.0&ncurses/6.4-GCCcore-12.3.0:PCRE2/10.42-GCCcore-12.3.0&GCCcore/12.3.0:GLib/2.77.1-GCCcore-12.3.0&GCCcore/12.3.0&libffi/3.4.4-GCCcore-12.3.0&gettext/0.21.1-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0&PCRE2/10.42-GCCcore-12.3.0&util-linux/2.39-GCCcore-12.3.0:cairo/1.17.8-GCCcore-12.3.0&GCCcore/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&freetype/2.13.0-GCCcore-12.3.0&pixman/0.42.2-GCCcore-12.3.0&expat/2.5.0-GCCcore-12.3.0&GLib/2.77.1-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0:libreadline/8.2-GCCcore-12.3.0&GCCcore/12.3.0&ncurses/6.4-GCCcore-12.3.0:Tcl/8.6.13-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0:SQLite/3.42.0-GCCcore-12.3.0&GCCcore/12.3.0&libreadline/8.2-GCCcore-12.3.0&Tcl/8.6.13-GCCcore-12.3.0:NASM/2.16.01-GCCcore-12.3.0&GCCcore/12.3.0:libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&GCCcore/12.3.0&NASM/2.16.01-GCCcore-12.3.0:jbigkit/2.1-GCCcore-12.3.0&GCCcore/12.3.0:libdeflate/1.18-GCCcore-12.3.0&GCCcore/12.3.0:LibTIFF/4.5.0-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&jbigkit/2.1-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&libdeflate/1.18-GCCcore-12.3.0:PCRE/8.45-GCCcore-12.3.0&GCCcore/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:libgit2/1.7.1-GCCcore-12.3.0&GCCcore/12.3.0&PCRE/8.45-GCCcore-12.3.0&OpenSSL/1.1:cURL/8.0.1-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&OpenSSL/1.1:Tk/8.6.13-GCCcore-12.3.0&GCCcore/12.3.0&Tcl/8.6.13-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:ICU/73.2-GCCcore-12.3.0&GCCcore/12.3.0:HarfBuzz/5.3.1-GCCcore-12.3.0&GCCcore/12.3.0&GLib/2.77.1-GCCcore-12.3.0&ICU/73.2-GCCcore-12.3.0&cairo/1.17.8-GCCcore-12.3.0&freetype/2.13.0-GCCcore-12.3.0:FriBidi/1.0.12-GCCcore-12.3.0&GCCcore/12.3.0:R/4.3.2-gfbf-2023a&gfbf/2023a&X11/20230603-GCCcore-12.3.0&Mesa/23.1.4-GCCcore-12.3.0&libGLU/9.0.3-GCCcore-12.3.0&cairo/1.17.8-GCCcore-12.3.0&libreadline/8.2-GCCcore-12.3.0&ncurses/6.4-GCCcore-12.3.0&bzip2/1.0.8-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&SQLite/3.42.0-GCCcore-12.3.0&PCRE2/10.42-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&Java/11&libgit2/1.7.1-GCCcore-12.3.0&OpenSSL/1.1&cURL/8.0.1-GCCcore-12.3.0&Tk/8.6.13-GCCcore-12.3.0&HarfBuzz/5.3.1-GCCcore-12.3.0&FriBidi/1.0.12-GCCcore-12.3.0:Boost/1.82.0-GCC-12.3.0&GCC/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&ICU/73.2-GCCcore-12.3.0:GSL/2.7-GCC-12.3.0&GCC/12.3.0:GMP/6.2.1-GCCcore-12.3.0&GCCcore/12.3.0:NLopt/2.7.1-GCCcore-12.3.0&GCCcore/12.3.0:libogg/1.3.5-GCCcore-12.3.0&GCCcore/12.3.0:FLAC/1.4.2-GCCcore-12.3.0&GCCcore/12.3.0&libogg/1.3.5-GCCcore-12.3.0:libvorbis/1.3.7-GCCcore-12.3.0&GCCcore/12.3.0&libogg/1.3.5-GCCcore-12.3.0:libopus/1.4-GCCcore-12.3.0&GCCcore/12.3.0:LAME/3.100-GCCcore-12.3.0&GCCcore/12.3.0&ncurses/6.4-GCCcore-12.3.0:libsndfile/1.2.2-GCCcore-12.3.0&GCCcore/12.3.0&FLAC/1.4.2-GCCcore-12.3.0&libvorbis/1.3.7-GCCcore-12.3.0&libopus/1.4-GCCcore-12.3.0&LAME/3.100-GCCcore-12.3.0:Szip/2.1.1-GCCcore-12.3.0&GCCcore/12.3.0:HDF5/1.14.0-gompi-2023a&gompi/2023a&zlib/1.2.13-GCCcore-12.3.0&Szip/2.1.1-GCCcore-12.3.0:UDUNITS/2.2.28-GCCcore-12.3.0&GCCcore/12.3.0&expat/2.5.0-GCCcore-12.3.0:ATK/2.38.0-GCCcore-12.3.0&GCCcore/12.3.0&GLib/2.77.1-GCCcore-12.3.0:DBus/1.15.4-GCCcore-12.3.0&GCCcore/12.3.0&expat/2.5.0-GCCcore-12.3.0:at-spi2-core/2.49.91-GCCcore-12.3.0&GCCcore/12.3.0&GLib/2.77.1-GCCcore-12.3.0&DBus/1.15.4-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0:at-spi2-atk/2.38.0-GCCcore-12.3.0&GCCcore/12.3.0&GLib/2.77.1-GCCcore-12.3.0&DBus/1.15.4-GCCcore-12.3.0&at-spi2-core/2.49.91-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0&ATK/2.38.0-GCCcore-12.3.0:Gdk-Pixbuf/2.42.10-GCCcore-12.3.0&GCCcore/12.3.0&GLib/2.77.1-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0:Pango/1.50.14-GCCcore-12.3.0&GCCcore/12.3.0&X11/20230603-GCCcore-12.3.0&GLib/2.77.1-GCCcore-12.3.0&cairo/1.17.8-GCCcore-12.3.0&HarfBuzz/5.3.1-GCCcore-12.3.0&FriBidi/1.0.12-GCCcore-12.3.0:libepoxy/1.5.10-GCCcore-12.3.0&GCCcore/12.3.0&X11/20230603-GCCcore-12.3.0&Mesa/23.1.4-GCCcore-12.3.0:Wayland/1.22.0-GCCcore-12.3.0&GCCcore/12.3.0&libffi/3.4.4-GCCcore-12.3.0&expat/2.5.0-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0:GTK3/3.24.37-GCCcore-12.3.0&GCCcore/12.3.0&ATK/2.38.0-GCCcore-12.3.0&at-spi2-atk/2.38.0-GCCcore-12.3.0&cairo/1.17.8-GCCcore-12.3.0&Gdk-Pixbuf/2.42.10-GCCcore-12.3.0&GLib/2.77.1-GCCcore-12.3.0&Pango/1.50.14-GCCcore-12.3.0&libepoxy/1.5.10-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0&FriBidi/1.0.12-GCCcore-12.3.0&Wayland/1.22.0-GCCcore-12.3.0:Ghostscript/10.01.2-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&freetype/2.13.0-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&expat/2.5.0-GCCcore-12.3.0&GLib/2.77.1-GCCcore-12.3.0&cairo/1.17.8-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&GTK3/3.24.37-GCCcore-12.3.0:libde265/1.0.15-GCCcore-12.3.0&GCCcore/12.3.0:x265/3.5-GCCcore-12.3.0&GCCcore/12.3.0:libheif/1.17.6-GCCcore-12.3.0&GCCcore/12.3.0&libpng/1.6.39-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&libde265/1.0.15-GCCcore-12.3.0&x265/3.5-GCCcore-12.3.0&Gdk-Pixbuf/2.42.10-GCCcore-12.3.0:JasPer/4.0.0-GCCcore-12.3.0&GCCcore/12.3.0&libheif/1.17.6-GCCcore-12.3.0:LittleCMS/2.15-GCCcore-12.3.0&GCCcore/12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0:ImageMagick/7.1.1-15-GCCcore-12.3.0&GCCcore/12.3.0&bzip2/1.0.8-GCCcore-12.3.0&X11/20230603-GCCcore-12.3.0&Ghostscript/10.01.2-GCCcore-12.3.0&JasPer/4.0.0-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&LittleCMS/2.15-GCCcore-12.3.0&Pango/1.50.14-GCCcore-12.3.0&pixman/0.42.2-GCCcore-12.3.0&FriBidi/1.0.12-GCCcore-12.3.0:GLPK/5.0-GCCcore-12.3.0&GCCcore/12.3.0&GMP/6.2.1-GCCcore-12.3.0:nodejs/18.17.1-GCCcore-12.3.0&GCCcore/12.3.0&ICU/73.2-GCCcore-12.3.0&OpenSSL/1.1:Python/3.11.3-GCCcore-12.3.0&GCCcore/12.3.0&binutils/2.40-GCCcore-12.3.0&bzip2/1.0.8-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&libreadline/8.2-GCCcore-12.3.0&ncurses/6.4-GCCcore-12.3.0&SQLite/3.42.0-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&libffi/3.4.4-GCCcore-12.3.0&OpenSSL/1.1:netCDF/4.9.2-gompi-2023a&gompi/2023a&HDF5/1.14.0-gompi-2023a&cURL/8.0.1-GCCcore-12.3.0&Szip/2.1.1-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&bzip2/1.0.8-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0:GEOS/3.12.0-GCC-12.3.0&GCC/12.3.0:libarchive/3.6.2-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0&OpenSSL/1.1&zstd/1.5.5-GCCcore-12.3.0:nlohmann_json/3.11.2-GCCcore-12.3.0&GCCcore/12.3.0:PROJ/9.2.0-GCCcore-12.3.0&GCCcore/12.3.0&SQLite/3.42.0-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&cURL/8.0.1-GCCcore-12.3.0&XZ/5.4.2-GCCcore-12.3.0&nlohmann_json/3.11.2-GCCcore-12.3.0:libgeotiff/1.7.1-GCCcore-12.3.0&GCCcore/12.3.0&PROJ/9.2.0-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&SQLite/3.42.0-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&cURL/8.0.1-GCCcore-12.3.0:cffi/1.15.1-GCCcore-12.3.0&GCCcore/12.3.0&Python/3.11.3-GCCcore-12.3.0:cryptography/41.0.1-GCCcore-12.3.0&GCCcore/12.3.0&Python/3.11.3-GCCcore-12.3.0&cffi/1.15.1-GCCcore-12.3.0:virtualenv/20.23.1-GCCcore-12.3.0&GCCcore/12.3.0&Python/3.11.3-GCCcore-12.3.0:Python-bundle-PyPI/2023.06-GCCcore-12.3.0&GCCcore/12.3.0&Python/3.11.3-GCCcore-12.3.0&cryptography/41.0.1-GCCcore-12.3.0&virtualenv/20.23.1-GCCcore-12.3.0:pybind11/2.11.1-GCCcore-12.3.0&GCCcore/12.3.0&Python/3.11.3-GCCcore-12.3.0:SciPy-bundle/2023.07-gfbf-2023a&gfbf/2023a&Python/3.11.3-GCCcore-12.3.0&Python-bundle-PyPI/2023.06-GCCcore-12.3.0&pybind11/2.11.1-GCCcore-12.3.0:libtirpc/1.3.3-GCCcore-12.3.0&GCCcore/12.3.0:HDF/4.2.16-2-GCCcore-12.3.0&GCCcore/12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&Szip/2.1.1-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&libtirpc/1.3.3-GCCcore-12.3.0:arpack-ng/3.9.0-foss-2023a&foss/2023a:Armadillo/12.6.2-foss-2023a&foss/2023a&Boost/1.82.0-GCC-12.3.0&HDF5/1.14.0-gompi-2023a&arpack-ng/3.9.0-foss-2023a:CFITSIO/4.3.0-GCCcore-12.3.0&GCCcore/12.3.0&cURL/8.0.1-GCCcore-12.3.0:giflib/5.2.1-GCCcore-12.3.0&GCCcore/12.3.0:json-c/0.16-GCCcore-12.3.0&GCCcore/12.3.0:Xerces-C++/3.2.4-GCCcore-12.3.0&GCCcore/12.3.0&cURL/8.0.1-GCCcore-12.3.0:Imath/3.1.7-GCCcore-12.3.0&GCCcore/12.3.0:OpenEXR/3.1.7-GCCcore-12.3.0&GCCcore/12.3.0&Imath/3.1.7-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0:Brunsli/0.1-GCCcore-12.3.0&GCCcore/12.3.0&Brotli/1.0.9-GCCcore-12.3.0:Qhull/2020.2-GCCcore-12.3.0&GCCcore/12.3.0:LERC/4.0.0-GCCcore-12.3.0&GCCcore/12.3.0:OpenJPEG/2.5.0-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0:SWIG/4.1.1-GCCcore-12.3.0&GCCcore/12.3.0&zlib/1.2.13-GCCcore-12.3.0&PCRE2/10.42-GCCcore-12.3.0:GDAL/3.7.1-foss-2023a&foss/2023a&Python/3.11.3-GCCcore-12.3.0&netCDF/4.9.2-gompi-2023a&expat/2.5.0-GCCcore-12.3.0&GEOS/3.12.0-GCC-12.3.0&SQLite/3.42.0-GCCcore-12.3.0&libarchive/3.6.2-GCCcore-12.3.0&libxml2/2.11.4-GCCcore-12.3.0&libpng/1.6.39-GCCcore-12.3.0&libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&LibTIFF/4.5.0-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&cURL/8.0.1-GCCcore-12.3.0&PCRE/8.45-GCCcore-12.3.0&PROJ/9.2.0-GCCcore-12.3.0&libgeotiff/1.7.1-GCCcore-12.3.0&SciPy-bundle/2023.07-gfbf-2023a&HDF5/1.14.0-gompi-2023a&HDF/4.2.16-2-GCCcore-12.3.0&Armadillo/12.6.2-foss-2023a&CFITSIO/4.3.0-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&giflib/5.2.1-GCCcore-12.3.0&json-c/0.16-GCCcore-12.3.0&Xerces-C++/3.2.4-GCCcore-12.3.0&PCRE2/10.42-GCCcore-12.3.0&OpenEXR/3.1.7-GCCcore-12.3.0&Brunsli/0.1-GCCcore-12.3.0&Qhull/2020.2-GCCcore-12.3.0&LERC/4.0.0-GCCcore-12.3.0&OpenJPEG/2.5.0-GCCcore-12.3.0&SWIG/4.1.1-GCCcore-12.3.0:MPFR/4.2.0-GCCcore-12.3.0&GCCcore/12.3.0&GMP/6.2.1-GCCcore-12.3.0:PostgreSQL/16.1-GCCcore-12.3.0&GCCcore/12.3.0&libreadline/8.2-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&OpenSSL/1.1:R-bundle-CRAN/2023.12-foss-2023a&foss/2023a&R/4.3.2-gfbf-2023a&libxml2/2.11.4-GCCcore-12.3.0&GMP/6.2.1-GCCcore-12.3.0&NLopt/2.7.1-GCCcore-12.3.0&FFTW/3.3.10-GCC-12.3.0&libsndfile/1.2.2-GCCcore-12.3.0&ICU/73.2-GCCcore-12.3.0&HDF5/1.14.0-gompi-2023a&UDUNITS/2.2.28-GCCcore-12.3.0&GSL/2.7-GCC-12.3.0&ImageMagick/7.1.1-15-GCCcore-12.3.0&GLPK/5.0-GCCcore-12.3.0&nodejs/18.17.1-GCCcore-12.3.0&GDAL/3.7.1-foss-2023a&MPFR/4.2.0-GCCcore-12.3.0&PostgreSQL/16.1-GCCcore-12.3.0:snappy/1.1.10-GCCcore-12.3.0&GCCcore/12.3.0:RapidJSON/1.1.0-20230928-GCCcore-12.3.0&GCCcore/12.3.0:Abseil/20230125.3-GCCcore-12.3.0&GCCcore/12.3.0:RE2/2023-08-01-GCCcore-12.3.0&GCCcore/12.3.0&Abseil/20230125.3-GCCcore-12.3.0:utf8proc/2.8.0-GCCcore-12.3.0&GCCcore/12.3.0:Arrow/14.0.1-gfbf-2023a&gfbf/2023a&Python/3.11.3-GCCcore-12.3.0&SciPy-bundle/2023.07-gfbf-2023a&Boost/1.82.0-GCC-12.3.0&lz4/1.9.4-GCCcore-12.3.0&zlib/1.2.13-GCCcore-12.3.0&bzip2/1.0.8-GCCcore-12.3.0&zstd/1.5.5-GCCcore-12.3.0&snappy/1.1.10-GCCcore-12.3.0&RapidJSON/1.1.0-20230928-GCCcore-12.3.0&RE2/2023-08-01-GCCcore-12.3.0&utf8proc/2.8.0-GCCcore-12.3.0:arrow-R/14.0.1-foss-2023a-R-4.3.2&foss/2023a&R/4.3.2-gfbf-2023a&R-bundle-CRAN/2023.12-foss-2023a&Arrow/14.0.1-gfbf-2023a:R-bundle-Bioconductor/3.18-foss-2023a-R-4.3.2&foss/2023a&R/4.3.2-gfbf-2023a&Boost/1.82.0-GCC-12.3.0&GSL/2.7-GCC-12.3.0&R-bundle-CRAN/2023.12-foss-2023a&arrow-R/14.0.1-foss-2023a-R-4.3.2\
   __MODULES_LMCONFLICT GCCcore/12.3.0&GCCcore:zlib/1.2.13-GCCcore-12.3.0&zlib:binutils/2.40-GCCcore-12.3.0&binutils:GCC/12.3.0&GCC:numactl/2.0.16-GCCcore-12.3.0&numactl:XZ/5.4.2-GCCcore-12.3.0&XZ:libxml2/2.11.4-GCCcore-12.3.0&libxml2:libpciaccess/0.17-GCCcore-12.3.0&libpciaccess:hwloc/2.9.1-GCCcore-12.3.0&hwloc:OpenSSL/1.1&OpenSSL:libevent/2.1.12-GCCcore-12.3.0&libevent:UCX/1.14.1-GCCcore-12.3.0&UCX:libfabric/1.18.0-GCCcore-12.3.0&libfabric:PMIx/4.2.4-GCCcore-12.3.0&PMIx:UCC/1.2.0-GCCcore-12.3.0&UCC:OpenMPI/4.1.5-GCC-12.3.0&OpenMPI:OpenBLAS/0.3.23-GCC-12.3.0&OpenBLAS:FlexiBLAS/3.3.1-GCC-12.3.0&FlexiBLAS:FFTW/3.3.10-GCC-12.3.0&FFTW:gompi/2023a&gompi:FFTW.MPI/3.3.10-gompi-2023a&FFTW.MPI:ScaLAPACK/2.2.0-gompi-2023a-fb&ScaLAPACK:foss/2023a&foss:gfbf/2023a&gfbf:bzip2/1.0.8-GCCcore-12.3.0&bzip2:expat/2.5.0-GCCcore-12.3.0&expat:libpng/1.6.39-GCCcore-12.3.0&libpng:Brotli/1.0.9-GCCcore-12.3.0&Brotli:freetype/2.13.0-GCCcore-12.3.0&freetype:ncurses/6.4-GCCcore-12.3.0&ncurses:util-linux/2.39-GCCcore-12.3.0&util-linux:fontconfig/2.14.2-GCCcore-12.3.0&fontconfig:xorg-macros/1.20.0-GCCcore-12.3.0&xorg-macros:X11/20230603-GCCcore-12.3.0&X11:gzip/1.12-GCCcore-12.3.0&gzip:lz4/1.9.4-GCCcore-12.3.0&lz4:zstd/1.5.5-GCCcore-12.3.0&zstd:libdrm/2.4.115-GCCcore-12.3.0&libdrm:libglvnd/1.6.0-GCCcore-12.3.0&libglvnd:libunwind/1.6.2-GCCcore-12.3.0&libunwind:LLVM/16.0.6-GCCcore-12.3.0&LLVM:Mesa/23.1.4-GCCcore-12.3.0&Mesa:libGLU/9.0.3-GCCcore-12.3.0&libGLU:pixman/0.42.2-GCCcore-12.3.0&pixman:libffi/3.4.4-GCCcore-12.3.0&libffi:gettext/0.21.1-GCCcore-12.3.0&gettext:PCRE2/10.42-GCCcore-12.3.0&PCRE2:GLib/2.77.1-GCCcore-12.3.0&GLib:cairo/1.17.8-GCCcore-12.3.0&cairo:libreadline/8.2-GCCcore-12.3.0&libreadline:Tcl/8.6.13-GCCcore-12.3.0&Tcl:SQLite/3.42.0-GCCcore-12.3.0&SQLite:NASM/2.16.01-GCCcore-12.3.0&NASM:libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&libjpeg-turbo:jbigkit/2.1-GCCcore-12.3.0&jbigkit:libdeflate/1.18-GCCcore-12.3.0&libdeflate:LibTIFF/4.5.0-GCCcore-12.3.0&LibTIFF:Java/11.0.27&Java:PCRE/8.45-GCCcore-12.3.0&PCRE:libgit2/1.7.1-GCCcore-12.3.0&libgit2:cURL/8.0.1-GCCcore-12.3.0&cURL:Tk/8.6.13-GCCcore-12.3.0&Tk:ICU/73.2-GCCcore-12.3.0&ICU:HarfBuzz/5.3.1-GCCcore-12.3.0&HarfBuzz:FriBidi/1.0.12-GCCcore-12.3.0&FriBidi:R/4.3.2-gfbf-2023a&R:Boost/1.82.0-GCC-12.3.0&Boost:GSL/2.7-GCC-12.3.0&GSL:GMP/6.2.1-GCCcore-12.3.0&GMP:NLopt/2.7.1-GCCcore-12.3.0&NLopt:libogg/1.3.5-GCCcore-12.3.0&libogg:FLAC/1.4.2-GCCcore-12.3.0&FLAC:libvorbis/1.3.7-GCCcore-12.3.0&libvorbis:libopus/1.4-GCCcore-12.3.0&libopus:LAME/3.100-GCCcore-12.3.0&LAME:libsndfile/1.2.2-GCCcore-12.3.0&libsndfile:Szip/2.1.1-GCCcore-12.3.0&Szip:HDF5/1.14.0-gompi-2023a&HDF5:UDUNITS/2.2.28-GCCcore-12.3.0&UDUNITS:ATK/2.38.0-GCCcore-12.3.0&ATK:DBus/1.15.4-GCCcore-12.3.0&DBus:at-spi2-core/2.49.91-GCCcore-12.3.0&at-spi2-core:at-spi2-atk/2.38.0-GCCcore-12.3.0&at-spi2-atk:Gdk-Pixbuf/2.42.10-GCCcore-12.3.0&Gdk-Pixbuf:Pango/1.50.14-GCCcore-12.3.0&Pango:libepoxy/1.5.10-GCCcore-12.3.0&libepoxy:Wayland/1.22.0-GCCcore-12.3.0&Wayland:GTK3/3.24.37-GCCcore-12.3.0&GTK3:Ghostscript/10.01.2-GCCcore-12.3.0&Ghostscript:libde265/1.0.15-GCCcore-12.3.0&libde265:x265/3.5-GCCcore-12.3.0&x265:libheif/1.17.6-GCCcore-12.3.0&libheif:JasPer/4.0.0-GCCcore-12.3.0&JasPer:LittleCMS/2.15-GCCcore-12.3.0&LittleCMS:ImageMagick/7.1.1-15-GCCcore-12.3.0&ImageMagick:GLPK/5.0-GCCcore-12.3.0&GLPK:nodejs/18.17.1-GCCcore-12.3.0&nodejs:Python/3.11.3-GCCcore-12.3.0&Python:netCDF/4.9.2-gompi-2023a&netCDF:GEOS/3.12.0-GCC-12.3.0&GEOS:libarchive/3.6.2-GCCcore-12.3.0&libarchive:nlohmann_json/3.11.2-GCCcore-12.3.0&nlohmann_json:PROJ/9.2.0-GCCcore-12.3.0&PROJ:libgeotiff/1.7.1-GCCcore-12.3.0&libgeotiff:cffi/1.15.1-GCCcore-12.3.0&cffi:cryptography/41.0.1-GCCcore-12.3.0&cryptography:virtualenv/20.23.1-GCCcore-12.3.0&virtualenv:Python-bundle-PyPI/2023.06-GCCcore-12.3.0&Python-bundle-PyPI:pybind11/2.11.1-GCCcore-12.3.0&pybind11:SciPy-bundle/2023.07-gfbf-2023a&SciPy-bundle:libtirpc/1.3.3-GCCcore-12.3.0&libtirpc:HDF/4.2.16-2-GCCcore-12.3.0&HDF:arpack-ng/3.9.0-foss-2023a&arpack-ng:Armadillo/12.6.2-foss-2023a&Armadillo:CFITSIO/4.3.0-GCCcore-12.3.0&CFITSIO:giflib/5.2.1-GCCcore-12.3.0&giflib:json-c/0.16-GCCcore-12.3.0&json-c:Xerces-C++/3.2.4-GCCcore-12.3.0&Xerces-C++:Imath/3.1.7-GCCcore-12.3.0&Imath:OpenEXR/3.1.7-GCCcore-12.3.0&OpenEXR:Brunsli/0.1-GCCcore-12.3.0&Brunsli:Qhull/2020.2-GCCcore-12.3.0&Qhull:LERC/4.0.0-GCCcore-12.3.0&LERC:OpenJPEG/2.5.0-GCCcore-12.3.0&OpenJPEG:SWIG/4.1.1-GCCcore-12.3.0&SWIG:GDAL/3.7.1-foss-2023a&GDAL:MPFR/4.2.0-GCCcore-12.3.0&MPFR:PostgreSQL/16.1-GCCcore-12.3.0&PostgreSQL:R-bundle-CRAN/2023.12-foss-2023a&R-bundle-CRAN:snappy/1.1.10-GCCcore-12.3.0&snappy:RapidJSON/1.1.0-20230928-GCCcore-12.3.0&RapidJSON:Abseil/20230125.3-GCCcore-12.3.0&Abseil:RE2/2023-08-01-GCCcore-12.3.0&RE2:utf8proc/2.8.0-GCCcore-12.3.0&utf8proc:Arrow/14.0.1-gfbf-2023a&Arrow:arrow-R/14.0.1-foss-2023a-R-4.3.2&arrow-R:R-bundle-Bioconductor/3.18-foss-2023a-R-4.3.2&R-bundle-Bioconductor\
   __MODULES_LMTAG GCCcore/12.3.0&auto-loaded:zlib/1.2.13-GCCcore-12.3.0&auto-loaded:binutils/2.40-GCCcore-12.3.0&auto-loaded:GCC/12.3.0&auto-loaded:numactl/2.0.16-GCCcore-12.3.0&auto-loaded:XZ/5.4.2-GCCcore-12.3.0&auto-loaded:libxml2/2.11.4-GCCcore-12.3.0&auto-loaded:libpciaccess/0.17-GCCcore-12.3.0&auto-loaded:hwloc/2.9.1-GCCcore-12.3.0&auto-loaded:OpenSSL/1.1&auto-loaded:libevent/2.1.12-GCCcore-12.3.0&auto-loaded:UCX/1.14.1-GCCcore-12.3.0&auto-loaded:libfabric/1.18.0-GCCcore-12.3.0&auto-loaded:PMIx/4.2.4-GCCcore-12.3.0&auto-loaded:UCC/1.2.0-GCCcore-12.3.0&auto-loaded:OpenMPI/4.1.5-GCC-12.3.0&auto-loaded:OpenBLAS/0.3.23-GCC-12.3.0&auto-loaded:FlexiBLAS/3.3.1-GCC-12.3.0&auto-loaded:FFTW/3.3.10-GCC-12.3.0&auto-loaded:gompi/2023a&auto-loaded:FFTW.MPI/3.3.10-gompi-2023a&auto-loaded:ScaLAPACK/2.2.0-gompi-2023a-fb&auto-loaded:foss/2023a&auto-loaded:gfbf/2023a&auto-loaded:bzip2/1.0.8-GCCcore-12.3.0&auto-loaded:expat/2.5.0-GCCcore-12.3.0&auto-loaded:libpng/1.6.39-GCCcore-12.3.0&auto-loaded:Brotli/1.0.9-GCCcore-12.3.0&auto-loaded:freetype/2.13.0-GCCcore-12.3.0&auto-loaded:ncurses/6.4-GCCcore-12.3.0&auto-loaded:util-linux/2.39-GCCcore-12.3.0&auto-loaded:fontconfig/2.14.2-GCCcore-12.3.0&auto-loaded:xorg-macros/1.20.0-GCCcore-12.3.0&auto-loaded:X11/20230603-GCCcore-12.3.0&auto-loaded:gzip/1.12-GCCcore-12.3.0&auto-loaded:lz4/1.9.4-GCCcore-12.3.0&auto-loaded:zstd/1.5.5-GCCcore-12.3.0&auto-loaded:libdrm/2.4.115-GCCcore-12.3.0&auto-loaded:libglvnd/1.6.0-GCCcore-12.3.0&auto-loaded:libunwind/1.6.2-GCCcore-12.3.0&auto-loaded:LLVM/16.0.6-GCCcore-12.3.0&auto-loaded:Mesa/23.1.4-GCCcore-12.3.0&auto-loaded:libGLU/9.0.3-GCCcore-12.3.0&auto-loaded:pixman/0.42.2-GCCcore-12.3.0&auto-loaded:libffi/3.4.4-GCCcore-12.3.0&auto-loaded:gettext/0.21.1-GCCcore-12.3.0&auto-loaded:PCRE2/10.42-GCCcore-12.3.0&auto-loaded:GLib/2.77.1-GCCcore-12.3.0&auto-loaded:cairo/1.17.8-GCCcore-12.3.0&auto-loaded:libreadline/8.2-GCCcore-12.3.0&auto-loaded:Tcl/8.6.13-GCCcore-12.3.0&auto-loaded:SQLite/3.42.0-GCCcore-12.3.0&auto-loaded:NASM/2.16.01-GCCcore-12.3.0&auto-loaded:libjpeg-turbo/2.1.5.1-GCCcore-12.3.0&auto-loaded:jbigkit/2.1-GCCcore-12.3.0&auto-loaded:libdeflate/1.18-GCCcore-12.3.0&auto-loaded:LibTIFF/4.5.0-GCCcore-12.3.0&auto-loaded:Java/11.0.27&auto-loaded:PCRE/8.45-GCCcore-12.3.0&auto-loaded:libgit2/1.7.1-GCCcore-12.3.0&auto-loaded:cURL/8.0.1-GCCcore-12.3.0&auto-loaded:Tk/8.6.13-GCCcore-12.3.0&auto-loaded:ICU/73.2-GCCcore-12.3.0&auto-loaded:HarfBuzz/5.3.1-GCCcore-12.3.0&auto-loaded:FriBidi/1.0.12-GCCcore-12.3.0&auto-loaded:R/4.3.2-gfbf-2023a&auto-loaded:Boost/1.82.0-GCC-12.3.0&auto-loaded:GSL/2.7-GCC-12.3.0&auto-loaded:GMP/6.2.1-GCCcore-12.3.0&auto-loaded:NLopt/2.7.1-GCCcore-12.3.0&auto-loaded:libogg/1.3.5-GCCcore-12.3.0&auto-loaded:FLAC/1.4.2-GCCcore-12.3.0&auto-loaded:libvorbis/1.3.7-GCCcore-12.3.0&auto-loaded:libopus/1.4-GCCcore-12.3.0&auto-loaded:LAME/3.100-GCCcore-12.3.0&auto-loaded:libsndfile/1.2.2-GCCcore-12.3.0&auto-loaded:Szip/2.1.1-GCCcore-12.3.0&auto-loaded:HDF5/1.14.0-gompi-2023a&auto-loaded:UDUNITS/2.2.28-GCCcore-12.3.0&auto-loaded:ATK/2.38.0-GCCcore-12.3.0&auto-loaded:DBus/1.15.4-GCCcore-12.3.0&auto-loaded:at-spi2-core/2.49.91-GCCcore-12.3.0&auto-loaded:at-spi2-atk/2.38.0-GCCcore-12.3.0&auto-loaded:Gdk-Pixbuf/2.42.10-GCCcore-12.3.0&auto-loaded:Pango/1.50.14-GCCcore-12.3.0&auto-loaded:libepoxy/1.5.10-GCCcore-12.3.0&auto-loaded:Wayland/1.22.0-GCCcore-12.3.0&auto-loaded:GTK3/3.24.37-GCCcore-12.3.0&auto-loaded:Ghostscript/10.01.2-GCCcore-12.3.0&auto-loaded:libde265/1.0.15-GCCcore-12.3.0&auto-loaded:x265/3.5-GCCcore-12.3.0&auto-loaded:libheif/1.17.6-GCCcore-12.3.0&auto-loaded:JasPer/4.0.0-GCCcore-12.3.0&auto-loaded:LittleCMS/2.15-GCCcore-12.3.0&auto-loaded:ImageMagick/7.1.1-15-GCCcore-12.3.0&auto-loaded:GLPK/5.0-GCCcore-12.3.0&auto-loaded:nodejs/18.17.1-GCCcore-12.3.0&auto-loaded:Python/3.11.3-GCCcore-12.3.0&auto-loaded:netCDF/4.9.2-gompi-2023a&auto-loaded:GEOS/3.12.0-GCC-12.3.0&auto-loaded:libarchive/3.6.2-GCCcore-12.3.0&auto-loaded:nlohmann_json/3.11.2-GCCcore-12.3.0&auto-loaded:PROJ/9.2.0-GCCcore-12.3.0&auto-loaded:libgeotiff/1.7.1-GCCcore-12.3.0&auto-loaded:cffi/1.15.1-GCCcore-12.3.0&auto-loaded:cryptography/41.0.1-GCCcore-12.3.0&auto-loaded:virtualenv/20.23.1-GCCcore-12.3.0&auto-loaded:Python-bundle-PyPI/2023.06-GCCcore-12.3.0&auto-loaded:pybind11/2.11.1-GCCcore-12.3.0&auto-loaded:SciPy-bundle/2023.07-gfbf-2023a&auto-loaded:libtirpc/1.3.3-GCCcore-12.3.0&auto-loaded:HDF/4.2.16-2-GCCcore-12.3.0&auto-loaded:arpack-ng/3.9.0-foss-2023a&auto-loaded:Armadillo/12.6.2-foss-2023a&auto-loaded:CFITSIO/4.3.0-GCCcore-12.3.0&auto-loaded:giflib/5.2.1-GCCcore-12.3.0&auto-loaded:json-c/0.16-GCCcore-12.3.0&auto-loaded:Xerces-C++/3.2.4-GCCcore-12.3.0&auto-loaded:Imath/3.1.7-GCCcore-12.3.0&auto-loaded:OpenEXR/3.1.7-GCCcore-12.3.0&auto-loaded:Brunsli/0.1-GCCcore-12.3.0&auto-loaded:Qhull/2020.2-GCCcore-12.3.0&auto-loaded:LERC/4.0.0-GCCcore-12.3.0&auto-loaded:OpenJPEG/2.5.0-GCCcore-12.3.0&auto-loaded:SWIG/4.1.1-GCCcore-12.3.0&auto-loaded:GDAL/3.7.1-foss-2023a&auto-loaded:MPFR/4.2.0-GCCcore-12.3.0&auto-loaded:PostgreSQL/16.1-GCCcore-12.3.0&auto-loaded:R-bundle-CRAN/2023.12-foss-2023a&auto-loaded:snappy/1.1.10-GCCcore-12.3.0&auto-loaded:RapidJSON/1.1.0-20230928-GCCcore-12.3.0&auto-loaded:Abseil/20230125.3-GCCcore-12.3.0&auto-loaded:RE2/2023-08-01-GCCcore-12.3.0&auto-loaded:utf8proc/2.8.0-GCCcore-12.3.0&auto-loaded:Arrow/14.0.1-gfbf-2023a&auto-loaded:arrow-R/14.0.1-foss-2023a-R-4.3.2&auto-loaded\
   LOADEDMODULES GCCcore/12.3.0:zlib/1.2.13-GCCcore-12.3.0:binutils/2.40-GCCcore-12.3.0:GCC/12.3.0:numactl/2.0.16-GCCcore-12.3.0:XZ/5.4.2-GCCcore-12.3.0:libxml2/2.11.4-GCCcore-12.3.0:libpciaccess/0.17-GCCcore-12.3.0:hwloc/2.9.1-GCCcore-12.3.0:OpenSSL/1.1:libevent/2.1.12-GCCcore-12.3.0:UCX/1.14.1-GCCcore-12.3.0:libfabric/1.18.0-GCCcore-12.3.0:PMIx/4.2.4-GCCcore-12.3.0:UCC/1.2.0-GCCcore-12.3.0:OpenMPI/4.1.5-GCC-12.3.0:OpenBLAS/0.3.23-GCC-12.3.0:FlexiBLAS/3.3.1-GCC-12.3.0:FFTW/3.3.10-GCC-12.3.0:gompi/2023a:FFTW.MPI/3.3.10-gompi-2023a:ScaLAPACK/2.2.0-gompi-2023a-fb:foss/2023a:gfbf/2023a:bzip2/1.0.8-GCCcore-12.3.0:expat/2.5.0-GCCcore-12.3.0:libpng/1.6.39-GCCcore-12.3.0:Brotli/1.0.9-GCCcore-12.3.0:freetype/2.13.0-GCCcore-12.3.0:ncurses/6.4-GCCcore-12.3.0:util-linux/2.39-GCCcore-12.3.0:fontconfig/2.14.2-GCCcore-12.3.0:xorg-macros/1.20.0-GCCcore-12.3.0:X11/20230603-GCCcore-12.3.0:gzip/1.12-GCCcore-12.3.0:lz4/1.9.4-GCCcore-12.3.0:zstd/1.5.5-GCCcore-12.3.0:libdrm/2.4.115-GCCcore-12.3.0:libglvnd/1.6.0-GCCcore-12.3.0:libunwind/1.6.2-GCCcore-12.3.0:LLVM/16.0.6-GCCcore-12.3.0:Mesa/23.1.4-GCCcore-12.3.0:libGLU/9.0.3-GCCcore-12.3.0:pixman/0.42.2-GCCcore-12.3.0:libffi/3.4.4-GCCcore-12.3.0:gettext/0.21.1-GCCcore-12.3.0:PCRE2/10.42-GCCcore-12.3.0:GLib/2.77.1-GCCcore-12.3.0:cairo/1.17.8-GCCcore-12.3.0:libreadline/8.2-GCCcore-12.3.0:Tcl/8.6.13-GCCcore-12.3.0:SQLite/3.42.0-GCCcore-12.3.0:NASM/2.16.01-GCCcore-12.3.0:libjpeg-turbo/2.1.5.1-GCCcore-12.3.0:jbigkit/2.1-GCCcore-12.3.0:libdeflate/1.18-GCCcore-12.3.0:LibTIFF/4.5.0-GCCcore-12.3.0:Java/11.0.27:PCRE/8.45-GCCcore-12.3.0:libgit2/1.7.1-GCCcore-12.3.0:cURL/8.0.1-GCCcore-12.3.0:Tk/8.6.13-GCCcore-12.3.0:ICU/73.2-GCCcore-12.3.0:HarfBuzz/5.3.1-GCCcore-12.3.0:FriBidi/1.0.12-GCCcore-12.3.0:R/4.3.2-gfbf-2023a:Boost/1.82.0-GCC-12.3.0:GSL/2.7-GCC-12.3.0:GMP/6.2.1-GCCcore-12.3.0:NLopt/2.7.1-GCCcore-12.3.0:libogg/1.3.5-GCCcore-12.3.0:FLAC/1.4.2-GCCcore-12.3.0:libvorbis/1.3.7-GCCcore-12.3.0:libopus/1.4-GCCcore-12.3.0:LAME/3.100-GCCcore-12.3.0:libsndfile/1.2.2-GCCcore-12.3.0:Szip/2.1.1-GCCcore-12.3.0:HDF5/1.14.0-gompi-2023a:UDUNITS/2.2.28-GCCcore-12.3.0:ATK/2.38.0-GCCcore-12.3.0:DBus/1.15.4-GCCcore-12.3.0:at-spi2-core/2.49.91-GCCcore-12.3.0:at-spi2-atk/2.38.0-GCCcore-12.3.0:Gdk-Pixbuf/2.42.10-GCCcore-12.3.0:Pango/1.50.14-GCCcore-12.3.0:libepoxy/1.5.10-GCCcore-12.3.0:Wayland/1.22.0-GCCcore-12.3.0:GTK3/3.24.37-GCCcore-12.3.0:Ghostscript/10.01.2-GCCcore-12.3.0:libde265/1.0.15-GCCcore-12.3.0:x265/3.5-GCCcore-12.3.0:libheif/1.17.6-GCCcore-12.3.0:JasPer/4.0.0-GCCcore-12.3.0:LittleCMS/2.15-GCCcore-12.3.0:ImageMagick/7.1.1-15-GCCcore-12.3.0:GLPK/5.0-GCCcore-12.3.0:nodejs/18.17.1-GCCcore-12.3.0:Python/3.11.3-GCCcore-12.3.0:netCDF/4.9.2-gompi-2023a:GEOS/3.12.0-GCC-12.3.0:libarchive/3.6.2-GCCcore-12.3.0:nlohmann_json/3.11.2-GCCcore-12.3.0:PROJ/9.2.0-GCCcore-12.3.0:libgeotiff/1.7.1-GCCcore-12.3.0:cffi/1.15.1-GCCcore-12.3.0:cryptography/41.0.1-GCCcore-12.3.0:virtualenv/20.23.1-GCCcore-12.3.0:Python-bundle-PyPI/2023.06-GCCcore-12.3.0:pybind11/2.11.1-GCCcore-12.3.0:SciPy-bundle/2023.07-gfbf-2023a:libtirpc/1.3.3-GCCcore-12.3.0:HDF/4.2.16-2-GCCcore-12.3.0:arpack-ng/3.9.0-foss-2023a:Armadillo/12.6.2-foss-2023a:CFITSIO/4.3.0-GCCcore-12.3.0:giflib/5.2.1-GCCcore-12.3.0:json-c/0.16-GCCcore-12.3.0:Xerces-C++/3.2.4-GCCcore-12.3.0:Imath/3.1.7-GCCcore-12.3.0:OpenEXR/3.1.7-GCCcore-12.3.0:Brunsli/0.1-GCCcore-12.3.0:Qhull/2020.2-GCCcore-12.3.0:LERC/4.0.0-GCCcore-12.3.0:OpenJPEG/2.5.0-GCCcore-12.3.0:SWIG/4.1.1-GCCcore-12.3.0:GDAL/3.7.1-foss-2023a:MPFR/4.2.0-GCCcore-12.3.0:PostgreSQL/16.1-GCCcore-12.3.0:R-bundle-CRAN/2023.12-foss-2023a:snappy/1.1.10-GCCcore-12.3.0:RapidJSON/1.1.0-20230928-GCCcore-12.3.0:Abseil/20230125.3-GCCcore-12.3.0:RE2/2023-08-01-GCCcore-12.3.0:utf8proc/2.8.0-GCCcore-12.3.0:Arrow/14.0.1-gfbf-2023a:arrow-R/14.0.1-foss-2023a-R-4.3.2:R-bundle-Bioconductor/3.18-foss-2023a-R-4.3.2\
   _LMFILES_ $modpath.eb/GCCcore/12.3.0:$modpath.eb/zlib/1.2.13-GCCcore-12.3.0:$modpath.eb/binutils/2.40-GCCcore-12.3.0:$modpath.eb/GCC/12.3.0:$modpath.eb/numactl/2.0.16-GCCcore-12.3.0:$modpath.eb/XZ/5.4.2-GCCcore-12.3.0:$modpath.eb/libxml2/2.11.4-GCCcore-12.3.0:$modpath.eb/libpciaccess/0.17-GCCcore-12.3.0:$modpath.eb/hwloc/2.9.1-GCCcore-12.3.0:$modpath.eb/OpenSSL/1.1:$modpath.eb/libevent/2.1.12-GCCcore-12.3.0:$modpath.eb/UCX/1.14.1-GCCcore-12.3.0:$modpath.eb/libfabric/1.18.0-GCCcore-12.3.0:$modpath.eb/PMIx/4.2.4-GCCcore-12.3.0:$modpath.eb/UCC/1.2.0-GCCcore-12.3.0:$modpath.eb/OpenMPI/4.1.5-GCC-12.3.0:$modpath.eb/OpenBLAS/0.3.23-GCC-12.3.0:$modpath.eb/FlexiBLAS/3.3.1-GCC-12.3.0:$modpath.eb/FFTW/3.3.10-GCC-12.3.0:$modpath.eb/gompi/2023a:$modpath.eb/FFTW.MPI/3.3.10-gompi-2023a:$modpath.eb/ScaLAPACK/2.2.0-gompi-2023a-fb:$modpath.eb/foss/2023a:$modpath.eb/gfbf/2023a:$modpath.eb/bzip2/1.0.8-GCCcore-12.3.0:$modpath.eb/expat/2.5.0-GCCcore-12.3.0:$modpath.eb/libpng/1.6.39-GCCcore-12.3.0:$modpath.eb/Brotli/1.0.9-GCCcore-12.3.0:$modpath.eb/freetype/2.13.0-GCCcore-12.3.0:$modpath.eb/ncurses/6.4-GCCcore-12.3.0:$modpath.eb/util-linux/2.39-GCCcore-12.3.0:$modpath.eb/fontconfig/2.14.2-GCCcore-12.3.0:$modpath.eb/xorg-macros/1.20.0-GCCcore-12.3.0:$modpath.eb/X11/20230603-GCCcore-12.3.0:$modpath.eb/gzip/1.12-GCCcore-12.3.0:$modpath.eb/lz4/1.9.4-GCCcore-12.3.0:$modpath.eb/zstd/1.5.5-GCCcore-12.3.0:$modpath.eb/libdrm/2.4.115-GCCcore-12.3.0:$modpath.eb/libglvnd/1.6.0-GCCcore-12.3.0:$modpath.eb/libunwind/1.6.2-GCCcore-12.3.0:$modpath.eb/LLVM/16.0.6-GCCcore-12.3.0:$modpath.eb/Mesa/23.1.4-GCCcore-12.3.0:$modpath.eb/libGLU/9.0.3-GCCcore-12.3.0:$modpath.eb/pixman/0.42.2-GCCcore-12.3.0:$modpath.eb/libffi/3.4.4-GCCcore-12.3.0:$modpath.eb/gettext/0.21.1-GCCcore-12.3.0:$modpath.eb/PCRE2/10.42-GCCcore-12.3.0:$modpath.eb/GLib/2.77.1-GCCcore-12.3.0:$modpath.eb/cairo/1.17.8-GCCcore-12.3.0:$modpath.eb/libreadline/8.2-GCCcore-12.3.0:$modpath.eb/Tcl/8.6.13-GCCcore-12.3.0:$modpath.eb/SQLite/3.42.0-GCCcore-12.3.0:$modpath.eb/NASM/2.16.01-GCCcore-12.3.0:$modpath.eb/libjpeg-turbo/2.1.5.1-GCCcore-12.3.0:$modpath.eb/jbigkit/2.1-GCCcore-12.3.0:$modpath.eb/libdeflate/1.18-GCCcore-12.3.0:$modpath.eb/LibTIFF/4.5.0-GCCcore-12.3.0:$modpath.eb/Java/11.0.27:$modpath.eb/PCRE/8.45-GCCcore-12.3.0:$modpath.eb/libgit2/1.7.1-GCCcore-12.3.0:$modpath.eb/cURL/8.0.1-GCCcore-12.3.0:$modpath.eb/Tk/8.6.13-GCCcore-12.3.0:$modpath.eb/ICU/73.2-GCCcore-12.3.0:$modpath.eb/HarfBuzz/5.3.1-GCCcore-12.3.0:$modpath.eb/FriBidi/1.0.12-GCCcore-12.3.0:$modpath.eb/R/4.3.2-gfbf-2023a:$modpath.eb/Boost/1.82.0-GCC-12.3.0:$modpath.eb/GSL/2.7-GCC-12.3.0:$modpath.eb/GMP/6.2.1-GCCcore-12.3.0:$modpath.eb/NLopt/2.7.1-GCCcore-12.3.0:$modpath.eb/libogg/1.3.5-GCCcore-12.3.0:$modpath.eb/FLAC/1.4.2-GCCcore-12.3.0:$modpath.eb/libvorbis/1.3.7-GCCcore-12.3.0:$modpath.eb/libopus/1.4-GCCcore-12.3.0:$modpath.eb/LAME/3.100-GCCcore-12.3.0:$modpath.eb/libsndfile/1.2.2-GCCcore-12.3.0:$modpath.eb/Szip/2.1.1-GCCcore-12.3.0:$modpath.eb/HDF5/1.14.0-gompi-2023a:$modpath.eb/UDUNITS/2.2.28-GCCcore-12.3.0:$modpath.eb/ATK/2.38.0-GCCcore-12.3.0:$modpath.eb/DBus/1.15.4-GCCcore-12.3.0:$modpath.eb/at-spi2-core/2.49.91-GCCcore-12.3.0:$modpath.eb/at-spi2-atk/2.38.0-GCCcore-12.3.0:$modpath.eb/Gdk-Pixbuf/2.42.10-GCCcore-12.3.0:$modpath.eb/Pango/1.50.14-GCCcore-12.3.0:$modpath.eb/libepoxy/1.5.10-GCCcore-12.3.0:$modpath.eb/Wayland/1.22.0-GCCcore-12.3.0:$modpath.eb/GTK3/3.24.37-GCCcore-12.3.0:$modpath.eb/Ghostscript/10.01.2-GCCcore-12.3.0:$modpath.eb/libde265/1.0.15-GCCcore-12.3.0:$modpath.eb/x265/3.5-GCCcore-12.3.0:$modpath.eb/libheif/1.17.6-GCCcore-12.3.0:$modpath.eb/JasPer/4.0.0-GCCcore-12.3.0:$modpath.eb/LittleCMS/2.15-GCCcore-12.3.0:$modpath.eb/ImageMagick/7.1.1-15-GCCcore-12.3.0:$modpath.eb/GLPK/5.0-GCCcore-12.3.0:$modpath.eb/nodejs/18.17.1-GCCcore-12.3.0:$modpath.eb/Python/3.11.3-GCCcore-12.3.0:$modpath.eb/netCDF/4.9.2-gompi-2023a:$modpath.eb/GEOS/3.12.0-GCC-12.3.0:$modpath.eb/libarchive/3.6.2-GCCcore-12.3.0:$modpath.eb/nlohmann_json/3.11.2-GCCcore-12.3.0:$modpath.eb/PROJ/9.2.0-GCCcore-12.3.0:$modpath.eb/libgeotiff/1.7.1-GCCcore-12.3.0:$modpath.eb/cffi/1.15.1-GCCcore-12.3.0:$modpath.eb/cryptography/41.0.1-GCCcore-12.3.0:$modpath.eb/virtualenv/20.23.1-GCCcore-12.3.0:$modpath.eb/Python-bundle-PyPI/2023.06-GCCcore-12.3.0:$modpath.eb/pybind11/2.11.1-GCCcore-12.3.0:$modpath.eb/SciPy-bundle/2023.07-gfbf-2023a:$modpath.eb/libtirpc/1.3.3-GCCcore-12.3.0:$modpath.eb/HDF/4.2.16-2-GCCcore-12.3.0:$modpath.eb/arpack-ng/3.9.0-foss-2023a:$modpath.eb/Armadillo/12.6.2-foss-2023a:$modpath.eb/CFITSIO/4.3.0-GCCcore-12.3.0:$modpath.eb/giflib/5.2.1-GCCcore-12.3.0:$modpath.eb/json-c/0.16-GCCcore-12.3.0:$modpath.eb/Xerces-C++/3.2.4-GCCcore-12.3.0:$modpath.eb/Imath/3.1.7-GCCcore-12.3.0:$modpath.eb/OpenEXR/3.1.7-GCCcore-12.3.0:$modpath.eb/Brunsli/0.1-GCCcore-12.3.0:$modpath.eb/Qhull/2020.2-GCCcore-12.3.0:$modpath.eb/LERC/4.0.0-GCCcore-12.3.0:$modpath.eb/OpenJPEG/2.5.0-GCCcore-12.3.0:$modpath.eb/SWIG/4.1.1-GCCcore-12.3.0:$modpath.eb/GDAL/3.7.1-foss-2023a:$modpath.eb/MPFR/4.2.0-GCCcore-12.3.0:$modpath.eb/PostgreSQL/16.1-GCCcore-12.3.0:$modpath.eb/R-bundle-CRAN/2023.12-foss-2023a:$modpath.eb/snappy/1.1.10-GCCcore-12.3.0:$modpath.eb/RapidJSON/1.1.0-20230928-GCCcore-12.3.0:$modpath.eb/Abseil/20230125.3-GCCcore-12.3.0:$modpath.eb/RE2/2023-08-01-GCCcore-12.3.0:$modpath.eb/utf8proc/2.8.0-GCCcore-12.3.0:$modpath.eb/Arrow/14.0.1-gfbf-2023a:$modpath.eb/arrow-R/14.0.1-foss-2023a-R-4.3.2:$modpath.eb/R-bundle-Bioconductor/3.18-foss-2023a-R-4.3.2\
]
set testenvlist(purge) $testenvlist(list2)
# some tests have a minimum version requirement
array set testcompatlist [list avail3 4.6.0 whatis3 4.6.0 avail_cache 5.3.0\
   avail2_cache 5.3.0 avail3_cache 5.3.0 whatis_cache 5.3.0 whatis2_cache\
   5.3.0 whatis3_cache 5.3.0 load_cache 5.3.0 load2_cache 5.3.0]

# adapt output table to test mode
if {$mode eq {profile}} {
   set collen 45
   set colsep {----------------------------------------------+}
} else {
   set collen 9
   set colsep {----------+}
}
set linesep --------------+[string repeat $colsep [llength $taglist]]

# output header
append tooutput [format "%13s |" {}]
foreach elt $taglist {
   append tooutput [format "%${collen}s |" [string range $elt 0 7]]
}
append tooutput \n$linesep
puts $tooutput

# run each bench and output result
foreach test $testlist {
   runtest $mode $test
   if {$mode eq {profile}} {
      set tooutput {}
      set nbprofres [expr {$profprocnb + 1}]
      for {set i 0} {$i < $nbprofres} {incr i 1} {
         append tooutput [format "%13s |" [expr {$i == 0 ? $test : {}}]]
         foreach {tag res} $::testres($test) {
            set procname [lindex $res [expr {$i * 3}]]
            set nbcalls [lindex $res [expr {$i * 3 + 1}]]
            set runtime [lindex $res [expr {$i * 3 + 2}]]
            append tooutput [format "%29s: %6d %7d |" $procname $nbcalls\
               $runtime]
         }
         append tooutput \n
      }
      append tooutput $linesep
   } else {
      set tooutput [format "%13s |" $test]
      foreach {tag res} $::testres($test) {
         append tooutput [format "%${collen}s |" $res]
      }
   }
   puts $tooutput
}

# clean built files
foreach tag $taglist {
   catch {file delete modulecmd.$tag lib/libtclenvmodules.so.$tag}
}
catch {file delete tcl/mfinterp.tcl}

# restore workspace if saved
if {$needstash} {
   exec git stash pop
}

# vim:set tabstop=3 shiftwidth=3 expandtab autoindent syntax=tcl:
